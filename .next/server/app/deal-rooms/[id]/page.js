(()=>{var e={};e.id=4458,e.ids=[4458],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10022:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},13964:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},14260:(e,t,r)=>{Promise.resolve().then(r.bind(r,90580))},14508:(e,t,r)=>{"use strict";r.d(t,{L:()=>d,S:()=>l});var s=r(51423),a=r(8693),n=r(54050);let i=r(51060).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"},withCredentials:!0});function l(e,t,r,a){return(0,s.I)({queryKey:t,queryFn:async()=>(await i.get(e,r)).data,enabled:a?.enabled,refetchInterval:a?.refetchInterval,onSuccess:a?.onSuccess,onError:a?.onError})}function d(e,t,r){let s=(0,a.jE)();return(0,n.n)({mutationFn:async r=>(await i[e](t,r)).data,onSuccess:e=>{r?.invalidateQueries&&r.invalidateQueries.forEach(e=>{s.invalidateQueries({queryKey:e})}),r?.onSuccess&&r.onSuccess(e)},onError:r?.onError})}i.interceptors.request.use(e=>e,e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(window.location.href="/auth"),Promise.reject(e)))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28559:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31158:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},33416:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eo});var s=r(60687),a=r(16189),n=r(25748),i=r(14508),l=r(43210),d=r(85814),o=r.n(d),c=r(85763),u=r(24934),m=r(62688);let x=(0,m.A)("paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]),h=(0,m.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var p=r(72542);function f({messages:e,dealRoomId:t,currentUserId:r,currentUserRole:a}){let[n,d]=(0,l.useState)(""),o=(0,l.useRef)(null),c=(0,i.L)("post",`/api/deal-rooms/${t}/messages`,{invalidateQueries:[[`/api/deal-rooms/${t}`]],onSuccess:()=>{d("")}}),m=e=>{try{return(0,p.GP)(new Date(e),"MMM d, yyyy h:mm a")}catch(t){return e}};return(0,s.jsxs)("div",{className:"flex flex-col h-[600px] border rounded-lg",children:[(0,s.jsx)("div",{className:"flex-grow overflow-y-auto p-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,s.jsx)("div",{className:`flex ${e.isSystemMessage?"justify-center":e.senderId===r?"justify-end":"justify-start"}`,children:e.isSystemMessage?(0,s.jsxs)("div",{className:"bg-gray-100 text-gray-600 rounded-md py-2 px-4 text-sm max-w-[80%]",children:[(0,s.jsx)("div",{children:e.content}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:m(e.timestamp)})]}):e.senderId===r?(0,s.jsxs)("div",{className:"bg-blue-600 text-white rounded-lg py-2 px-4 max-w-[80%]",children:[(0,s.jsx)("div",{children:e.content}),(0,s.jsx)("div",{className:"text-xs text-blue-200 mt-1 text-right",children:m(e.timestamp)})]}):(0,s.jsxs)("div",{className:"bg-gray-200 text-gray-800 rounded-lg py-2 px-4 max-w-[80%]",children:[(0,s.jsxs)("div",{className:"font-medium text-sm text-gray-600 mb-1",children:[e.senderName," (",e.senderRole,")"]}),(0,s.jsx)("div",{children:e.content}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:m(e.timestamp)})]})},e.id)),(0,s.jsx)("div",{ref:o})]})}),(0,s.jsx)("div",{className:"border-t p-3",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.trim()&&c.mutate({dealRoomId:t,content:n})},className:"flex space-x-2",children:[(0,s.jsx)(u.$,{type:"button",variant:"outline",size:"icon",className:"shrink-0",title:"Attach file (coming soon)",disabled:!0,children:(0,s.jsx)(x,{className:"h-4 w-4"})}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>d(e.target.value),className:"flex-grow px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Type your message..."}),(0,s.jsxs)(u.$,{type:"submit",disabled:!n.trim()||c.isPending,className:"shrink-0",children:[(0,s.jsx)(h,{className:"h-4 w-4 mr-2"}),"Send"]})]})})]})}var v=r(55192),y=r(80013),j=r(89667),g=r(34729),N=r(34466),b=r(78272);let w=(0,m.A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var D=r(13964),k=r(96241);!function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}();let M=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}());!function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}();let C=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),O=l.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:a,className:(0,k.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{asChild:!0,children:(0,s.jsx)(b.A,{className:"h-4 w-4 opacity-50"})})]}));O.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName;let F=l.forwardRef(({className:e,...t},r)=>(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:r,className:(0,k.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(w,{className:"h-4 w-4"})}));F.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName;let A=l.forwardRef(({className:e,...t},r)=>(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:r,className:(0,k.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(b.A,{className:"h-4 w-4"})}));A.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName;let E=l.forwardRef(({className:e,children:t,position:r="popper",...a},n)=>(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,s.jsxs)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:n,className:(0,k.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[(0,s.jsx)(F,{}),(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{className:(0,k.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,s.jsx)(A,{})]})}));E.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName,l.forwardRef(({className:e,...t},r)=>(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:r,className:(0,k.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName;let _=l.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:a,className:(0,k.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,s.jsx)(D.A,{className:"h-4 w-4"})})}),(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{children:t})]}));_.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName,l.forwardRef(({className:e,...t},r)=>(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:r,className:(0,k.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName;var R=r(41862);let U=(0,m.A)("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);function T({terms:e,dealRoomId:t,projectName:r,currentUserId:a,currentUserRole:n,status:d,onUpdateStatus:o}){let[c,m]=(0,l.useState)(!1),[x,h]=(0,l.useState)(e),p=(0,i.L)("put",`/api/deal-rooms/${t}/terms`,{invalidateQueries:[[`/api/deal-rooms/${t}`]],onSuccess:()=>{m(!1)}}),f=e=>void 0===e?"":new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",maximumFractionDigits:0}).format(e),b=e=>void 0===e?"":`${e}%`;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Deal Terms"}),(0,s.jsx)("div",{className:"flex space-x-2",children:(0,s.jsxs)(u.$,{variant:"outline",size:"sm",disabled:c,onClick:()=>m(!0),children:[(0,s.jsx)(U,{className:"h-4 w-4 mr-2"}),"Edit Terms"]})})]}),(0,s.jsxs)(v.Zp,{children:[(0,s.jsx)(v.aR,{children:(0,s.jsx)(v.ZB,{children:e.dealType?(0,s.jsxs)(s.Fragment,{children:["equity"===e.dealType&&"Equity Investment","convertible_note"===e.dealType&&"Convertible Note","safe"===e.dealType&&"Simple Agreement for Future Equity (SAFE)","revenue_share"===e.dealType&&"Revenue Share Agreement","grant"===e.dealType&&"Grant Funding","other"===e.dealType&&"Custom Deal Structure"]}):"Investment Terms"})}),(0,s.jsx)(v.Wu,{children:c?(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p.mutate({dealRoomId:t,terms:x})},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"dealType",children:"Deal Type"}),(0,s.jsxs)(M,{value:x.dealType||"equity",onValueChange:e=>h({...x,dealType:e}),children:[(0,s.jsx)(O,{children:(0,s.jsx)(C,{placeholder:"Select deal type"})}),(0,s.jsxs)(E,{children:[(0,s.jsx)(_,{value:"equity",children:"Equity"}),(0,s.jsx)(_,{value:"convertible_note",children:"Convertible Note"}),(0,s.jsx)(_,{value:"safe",children:"SAFE"}),(0,s.jsx)(_,{value:"revenue_share",children:"Revenue Share"}),(0,s.jsx)(_,{value:"grant",children:"Grant"}),(0,s.jsx)(_,{value:"other",children:"Other"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"investmentAmount",children:"Investment Amount (₦)"}),(0,s.jsx)(j.p,{id:"investmentAmount",type:"number",value:x.investmentAmount||"",onChange:e=>h({...x,investmentAmount:e.target.value?parseFloat(e.target.value):void 0})})]}),("equity"===x.dealType||!x.dealType)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"equity",children:"Equity Percentage (%)"}),(0,s.jsx)(j.p,{id:"equity",type:"number",step:"0.01",value:x.equity||"",onChange:e=>h({...x,equity:e.target.value?parseFloat(e.target.value):void 0})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"valuation",children:"Company Valuation (₦)"}),(0,s.jsx)(j.p,{id:"valuation",type:"number",value:x.valuation||"",onChange:e=>h({...x,valuation:e.target.value?parseFloat(e.target.value):void 0})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"minimumInvestment",children:"Minimum Investment (₦)"}),(0,s.jsx)(j.p,{id:"minimumInvestment",type:"number",value:x.minimumInvestment||"",onChange:e=>h({...x,minimumInvestment:e.target.value?parseFloat(e.target.value):void 0})})]})]}),("convertible_note"===x.dealType||"safe"===x.dealType)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"valuationCap",children:"Valuation Cap (₦)"}),(0,s.jsx)(j.p,{id:"valuationCap",type:"number",value:x.valuationCap||"",onChange:e=>h({...x,valuationCap:e.target.value?parseFloat(e.target.value):void 0})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"conversionDiscount",children:"Conversion Discount (%)"}),(0,s.jsx)(j.p,{id:"conversionDiscount",type:"number",step:"0.01",value:x.conversionDiscount||"",onChange:e=>h({...x,conversionDiscount:e.target.value?parseFloat(e.target.value):void 0})})]}),"convertible_note"===x.dealType&&(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"interestRate",children:"Interest Rate (%)"}),(0,s.jsx)(j.p,{id:"interestRate",type:"number",step:"0.01",value:x.interestRate||"",onChange:e=>h({...x,interestRate:e.target.value?parseFloat(e.target.value):void 0})})]})]}),"revenue_share"===x.dealType&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"revenuePercentage",children:"Revenue Percentage (%)"}),(0,s.jsx)(j.p,{id:"revenuePercentage",type:"number",step:"0.01",value:x.revenuePercentage||"",onChange:e=>h({...x,revenuePercentage:e.target.value?parseFloat(e.target.value):void 0})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"returnCap",children:"Return Cap (multiplier)"}),(0,s.jsx)(j.p,{id:"returnCap",type:"number",step:"0.1",value:x.returnCap||"",onChange:e=>h({...x,returnCap:e.target.value?parseFloat(e.target.value):void 0})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"paymentFrequency",children:"Payment Frequency"}),(0,s.jsxs)(M,{value:x.paymentFrequency||"monthly",onValueChange:e=>h({...x,paymentFrequency:e}),children:[(0,s.jsx)(O,{children:(0,s.jsx)(C,{placeholder:"Select frequency"})}),(0,s.jsxs)(E,{children:[(0,s.jsx)(_,{value:"monthly",children:"Monthly"}),(0,s.jsx)(_,{value:"quarterly",children:"Quarterly"}),(0,s.jsx)(_,{value:"annually",children:"Annually"})]})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"additionalTerms",children:"Additional Terms or Notes"}),(0,s.jsx)(g.T,{id:"additionalTerms",value:x.additionalTerms||"",onChange:e=>h({...x,additionalTerms:e.target.value}),rows:4})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)(u.$,{type:"submit",disabled:p.isPending,children:[p.isPending&&(0,s.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Terms"]}),(0,s.jsx)(u.$,{type:"button",variant:"outline",onClick:()=>{h(e),m(!1)},children:"Cancel"})]})]}):(0,s.jsx)(s.Fragment,{children:Object.keys(e).length>0?(0,s.jsxs)("div",{className:"space-y-6",children:[(()=>{let t=e.dealType||"equity";switch(t){case"equity":return(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Investment Amount"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:f(e.investmentAmount)||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Equity Offered"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:b(e.equity)||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Company Valuation"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:f(e.valuation)||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Minimum Investment"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:f(e.minimumInvestment)||"Not specified"})]})]});case"convertible_note":case"safe":return(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Investment Amount"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:f(e.investmentAmount)||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Valuation Cap"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:f(e.valuationCap)||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Conversion Discount"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:b(e.conversionDiscount)||"Not specified"})]}),"convertible_note"===t&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Interest Rate"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:b(e.interestRate)||"Not specified"})]})]});case"revenue_share":return(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Investment Amount"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:f(e.investmentAmount)||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Revenue Percentage"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:b(e.revenuePercentage)||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Return Cap"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:e.returnCap?`${e.returnCap}x`:"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-1 text-gray-800",children:"Payment Frequency"}),(0,s.jsx)("p",{className:"text-xl font-bold capitalize",children:e.paymentFrequency||"Not specified"})]})]});default:return(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-gray-600",children:"No specific terms have been defined yet."})})}})(),e.additionalTerms&&(0,s.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,s.jsx)("h3",{className:"font-medium mb-2 text-gray-800",children:"Additional Terms & Notes"}),(0,s.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:e.additionalTerms})]})]}):(0,s.jsxs)("div",{className:"py-8 text-center",children:[(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"No deal terms have been proposed yet."}),(0,s.jsx)(u.$,{onClick:()=>m(!0),children:"Propose Terms"})]})})})]}),!c&&Object.keys(e).length>0&&(0,s.jsxs)(v.Zp,{children:[(0,s.jsx)(v.aR,{children:(0,s.jsx)(v.ZB,{children:"Deal Status"})}),(0,s.jsx)(v.Wu,{children:(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)(N.z,{defaultValue:d,onValueChange:e=>{e!==d&&o(e)},children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.C,{value:"pending",id:"pending"}),(0,s.jsx)(y.J,{htmlFor:"pending",children:"Pending - Initial Discussion"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.C,{value:"negotiation",id:"negotiation"}),(0,s.jsx)(y.J,{htmlFor:"negotiation",children:"In Negotiation - Actively Discussing Terms"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.C,{value:"due_diligence",id:"due_diligence"}),(0,s.jsx)(y.J,{htmlFor:"due_diligence",children:"Due Diligence - Verifying Information"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.C,{value:"signed",id:"signed"}),(0,s.jsx)(y.J,{htmlFor:"signed",children:"Terms Signed - Awaiting Closing"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.C,{value:"closed",id:"closed"}),(0,s.jsx)(y.J,{htmlFor:"closed",children:"Deal Closed - Investment Complete"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.C,{value:"rejected",id:"rejected"}),(0,s.jsx)(y.J,{htmlFor:"rejected",children:"Rejected - Not Moving Forward"})]})]})})})]})]})}let q=(0,m.A)("file-pen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),S=(0,m.A)("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),I=(0,m.A)("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),P=(0,m.A)("file-archive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);var $=r(10022);let L=(0,m.A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),z=(0,m.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var G=r(31158);let H=(0,m.A)("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function V({documents:e,dealRoomId:t,currentUserId:r,currentUserRole:a}){let[n,d]=(0,l.useState)(null),[o,c]=(0,l.useState)(!1),[m,x]=(0,l.useState)(""),h=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(2))} ${["Bytes","KB","MB","GB"][t]}`},f=e=>{try{return(0,p.GP)(new Date(e),"MMM d, yyyy")}catch(t){return e}},y=e=>{if(e.includes("pdf"))return(0,s.jsx)(q,{className:"h-8 w-8 text-red-500"});if(e.includes("image"))return(0,s.jsx)(S,{className:"h-8 w-8 text-blue-500"});if(e.includes("sheet")||e.includes("excel")||e.includes("csv"))return(0,s.jsx)(I,{className:"h-8 w-8 text-green-500"});if(e.includes("zip")||e.includes("rar"))return(0,s.jsx)(P,{className:"h-8 w-8 text-purple-500"});if(e.includes("text")||e.includes("doc"))return(0,s.jsx)($.A,{className:"h-8 w-8 text-blue-700"});else return(0,s.jsx)(L,{className:"h-8 w-8 text-gray-500"})},j=(0,i.L)("post",`/api/deal-rooms/${t}/documents`,{invalidateQueries:[[`/api/deal-rooms/${t}`]],onSuccess:()=>{d(null),x(""),c(!1)}});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Shared Documents"}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-8 border rounded-lg bg-gray-50",children:[(0,s.jsx)($.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No documents have been shared yet"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Upload documents to share with the other party"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>(0,s.jsx)(v.Zp,{className:"overflow-hidden",children:(0,s.jsxs)(v.Wu,{className:"p-0",children:[(0,s.jsxs)("div",{className:"p-4 flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"shrink-0",children:y(e.type)}),(0,s.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:e.name}),e.isConfidential&&(0,s.jsx)(z,{className:"h-4 w-4 ml-1 text-amber-500"})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1 truncate",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center mt-1 text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:["Uploaded ",f(e.uploadedAt)]}),(0,s.jsx)("span",{className:"mx-2",children:"•"}),(0,s.jsx)("span",{children:h(e.size)})]})]})]}),(0,s.jsx)("div",{className:"border-t bg-gray-50 px-4 py-2 flex justify-end",children:(0,s.jsx)(u.$,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsxs)("a",{href:e.url,download:e.name,target:"_blank",rel:"noopener noreferrer",children:[(0,s.jsx)(G.A,{className:"h-4 w-4 mr-1"}),"Download"]})})})]})},e.id))})]}),(0,s.jsxs)("div",{className:"mt-8 border-t pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Upload New Document"}),(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!n)return;let t=new FormData;t.append("file",n),t.append("description",m),t.append("isConfidential",o.toString()),j.mutate(t)},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,s.jsx)("input",{type:"file",id:"file-upload",className:"hidden",onChange:e=>{let t=e.target.files;t&&t.length>0&&d(t[0])}}),n?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"flex items-center justify-center",children:y(n.type)}),(0,s.jsx)("p",{className:"text-sm font-medium",children:n.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:h(n.size)}),(0,s.jsx)(u.$,{type:"button",variant:"outline",size:"sm",onClick:()=>d(null),children:"Change File"})]}):(0,s.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(H,{className:"h-10 w-10 text-gray-400"})}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"Click to upload a file"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"PDF, Word, Excel, Images, etc."})]})})]}),n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),(0,s.jsx)("input",{type:"text",id:"description",className:"w-full px-3 py-2 border rounded-md",value:m,onChange:e=>x(e.target.value),placeholder:"Brief description of the document"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"confidential",className:"h-4 w-4 text-blue-600 rounded border-gray-300",checked:o,onChange:e=>c(e.target.checked)}),(0,s.jsx)("label",{htmlFor:"confidential",className:"ml-2 text-sm text-gray-700",children:"Mark as confidential"})]}),(0,s.jsx)(u.$,{type:"submit",disabled:j.isPending,className:"w-full",children:j.isPending?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-opacity-50 border-t-transparent rounded-full"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H,{className:"h-4 w-4 mr-2"}),"Upload Document"]})})]})]})]})]})}var J=r(64722),X=r(78872),B=r(31504),Z=r(29789),Q=r(23711);function W(e,t){let r=(0,Q.a)(e)-(0,Q.a)(t);return r<0?-1:r>0?1:r}var Y=r(58505),K=r(58887);let ee=(0,m.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var et=r(93613),er=r(41312);function es({activities:e}){let t=e=>{try{return(0,p.GP)(new Date(e),"MMM d, yyyy h:mm a")}catch(t){return e}},r=e=>{try{return function(e,t,r){let s,a=(0,X.q)(),n=r?.locale??a.locale??J.c,i=W(e,t);if(isNaN(i))throw RangeError("Invalid time value");let l=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:i}),[d,o]=(0,Z.x)(r?.in,...i>0?[t,e]:[e,t]),c=function(e,t,r){var s;let a=((0,Q.a)(e)-(0,Q.a)(t))/1e3;return(s=void 0,e=>{let t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})(a)}(o,d),u=Math.round((c-((0,B.G)(o)-(0,B.G)(d))/1e3)/60);if(u<2)if(r?.includeSeconds)if(c<5)return n.formatDistance("lessThanXSeconds",5,l);else if(c<10)return n.formatDistance("lessThanXSeconds",10,l);else if(c<20)return n.formatDistance("lessThanXSeconds",20,l);else if(c<40)return n.formatDistance("halfAMinute",0,l);else if(c<60)return n.formatDistance("lessThanXMinutes",1,l);else return n.formatDistance("xMinutes",1,l);else if(0===u)return n.formatDistance("lessThanXMinutes",1,l);else return n.formatDistance("xMinutes",u,l);if(u<45)return n.formatDistance("xMinutes",u,l);if(u<90)return n.formatDistance("aboutXHours",1,l);if(u<Y.F6){let e=Math.round(u/60);return n.formatDistance("aboutXHours",e,l)}if(u<2520)return n.formatDistance("xDays",1,l);else if(u<Y.Nw){let e=Math.round(u/Y.F6);return n.formatDistance("xDays",e,l)}else if(u<2*Y.Nw)return s=Math.round(u/Y.Nw),n.formatDistance("aboutXMonths",s,l);if((s=function(e,t,r){let[s,a,n]=(0,Z.x)(void 0,e,e,t),i=W(a,n),l=Math.abs(function(e,t,r){let[s,a]=(0,Z.x)(void 0,e,t),n=s.getFullYear()-a.getFullYear();return 12*n+(s.getMonth()-a.getMonth())}(a,n));if(l<1)return 0;1===a.getMonth()&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*l);let d=W(a,n)===-i;(function(e,t){let r=(0,Q.a)(e,void 0);return+function(e,t){let r=(0,Q.a)(e,t?.in);return r.setHours(23,59,59,999),r}(r,void 0)==+function(e,t){let r=(0,Q.a)(e,t?.in),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(23,59,59,999),r}(r,t)})(s)&&1===l&&1===W(s,n)&&(d=!1);let o=i*(l-d);return 0===o?0:o}(o,d))<12){let e=Math.round(u/Y.Nw);return n.formatDistance("xMonths",e,l)}{let e=s%12,t=Math.trunc(s/12);return e<3?n.formatDistance("aboutXYears",t,l):e<9?n.formatDistance("overXYears",t,l):n.formatDistance("almostXYears",t+1,l)}}(new Date(e),new Date,{addSuffix:!0})}catch(e){return""}},a=e=>{switch(e){case"message":return(0,s.jsx)(K.A,{className:"h-5 w-5 text-blue-500"});case"document":return(0,s.jsx)($.A,{className:"h-5 w-5 text-green-500"});case"term_update":return(0,s.jsx)(ee,{className:"h-5 w-5 text-purple-500"});case"status_change":return(0,s.jsx)(et.A,{className:"h-5 w-5 text-orange-500"});case"user_joined":return(0,s.jsx)(er.A,{className:"h-5 w-5 text-indigo-500"});default:return(0,s.jsx)(K.A,{className:"h-5 w-5 text-gray-500"})}},n=e=>{let{type:t,userName:r,userRole:s,details:a}=e;switch(t){case"message":return`${r} (${s}) sent a message`;case"document":if("uploaded"===a.action)return`${r} (${s}) uploaded document: ${a.documentName}`;return`${r} (${s}) ${a.action} document: ${a.documentName}`;case"term_update":return`${r} (${s}) updated the deal terms`;case"status_change":return`${r} (${s}) changed deal status from "${a.previousStatus}" to "${a.newStatus}"`;case"user_joined":if(a.message)return a.message;return`${r} joined the deal room`;default:return`${r} performed an action`}},i=(()=>{let t={};return e.forEach(e=>{try{let r=(0,p.GP)(new Date(e.timestamp),"yyyy-MM-dd");t[r]||(t[r]=[]),t[r].push(e)}catch(s){let r="Unknown Date";t[r]||(t[r]=[]),t[r].push(e)}}),Object.entries(t).sort(([e],[t])=>"Unknown Date"===e?1:"Unknown Date"===t?-1:t.localeCompare(e)).map(([e,t])=>({date:e,activities:t.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())}))})(),l=e=>{if("Unknown Date"===e)return"Unknown Date";try{let t=(0,p.GP)(new Date,"yyyy-MM-dd"),r=(0,p.GP)(new Date(Date.now()-864e5),"yyyy-MM-dd");if(e===t)return"Today";if(e===r)return"Yesterday";return(0,p.GP)(new Date(e),"EEEE, MMMM d, yyyy")}catch(t){return e}};return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)(er.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No activity recorded yet"})]}):(0,s.jsx)("div",{className:"space-y-6",children:i.map(({date:e,activities:i})=>(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-4 sticky top-0 bg-white py-2",children:l(e)}),(0,s.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,s.jsxs)("div",{className:"flex items-start space-x-3 border-l-2 border-gray-200 pl-4 pb-1",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:a(e.type)}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("p",{className:"text-gray-800",children:n(e)}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[(0,s.jsx)("span",{children:t(e.timestamp)}),(0,s.jsx)("span",{className:"mx-1",children:"•"}),(0,s.jsx)("span",{children:r(e.timestamp)})]})]})]},e.id))})]},e))})}var ea=r(28559);let en=(0,m.A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),ei=(0,r(24224).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function el({className:e,variant:t,...r}){return(0,s.jsx)("div",{className:(0,k.cn)(ei({variant:t}),e),...r})}function ed({dealRoom:e,currentUserId:t,currentUserRole:r,onUpdateStatus:a,onArchive:n}){let[i,d]=(0,l.useState)("messages"),m=function(e){switch(e){case"pending":return{color:"bg-yellow-100 text-yellow-800",text:"Pending"};case"active":return{color:"bg-blue-100 text-blue-800",text:"Active"};case"negotiation":return{color:"bg-purple-100 text-purple-800",text:"In Negotiation"};case"due_diligence":return{color:"bg-indigo-100 text-indigo-800",text:"Due Diligence"};case"signed":return{color:"bg-green-100 text-green-800",text:"Signed"};case"closed":return{color:"bg-green-100 text-green-800",text:"Closed"};case"rejected":return{color:"bg-red-100 text-red-800",text:"Rejected"};default:return{color:"bg-gray-100 text-gray-800",text:e}}}(e.status),x="founder"===r?e.investorName:e.founderName,h="founder"===r?"Investor":"Founder";return(0,s.jsxs)("div",{className:"container mx-auto py-6 max-w-6xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(o(),{href:"/deal-rooms",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,s.jsx)(ea.A,{className:"h-4 w-4 mr-1"}),"Back to Deal Rooms"]}),(0,s.jsx)("h1",{className:"text-2xl font-bold mt-2",children:e.projectName}),(0,s.jsxs)("div",{className:"flex items-center mt-1",children:[(0,s.jsx)(el,{variant:"outline",className:`${m.color} mr-2`,children:m.text}),(0,s.jsxs)("span",{className:"text-gray-600 text-sm",children:["With ",x," (",h,")"]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[!e.isArchived&&(0,s.jsxs)(u.$,{variant:"outline",size:"sm",onClick:n,children:[(0,s.jsx)(en,{className:"h-4 w-4 mr-2"}),"Archive"]}),e.isArchived&&(0,s.jsxs)(u.$,{variant:"outline",size:"sm",onClick:n,children:[(0,s.jsx)(ee,{className:"h-4 w-4 mr-2"}),"Unarchive"]}),(0,s.jsxs)(u.$,{variant:"secondary",size:"sm",children:[(0,s.jsx)(er.A,{className:"h-4 w-4 mr-2"}),"Meeting"]})]})]}),(0,s.jsxs)(c.tU,{defaultValue:"messages",value:i,onValueChange:d,className:"w-full",children:[(0,s.jsxs)(c.j7,{className:"grid grid-cols-4 mb-8",children:[(0,s.jsx)(c.Xi,{value:"messages",children:"Messages"}),(0,s.jsx)(c.Xi,{value:"terms",children:"Deal Terms"}),(0,s.jsx)(c.Xi,{value:"documents",children:"Documents"}),(0,s.jsx)(c.Xi,{value:"activity",children:"Activity"})]}),(0,s.jsx)(c.av,{value:"messages",className:"mt-0",children:(0,s.jsx)(f,{messages:e.messages,dealRoomId:e.id,currentUserId:t,currentUserRole:r})}),(0,s.jsx)(c.av,{value:"terms",className:"mt-0",children:(0,s.jsx)(T,{terms:e.terms,dealRoomId:e.id,projectName:e.projectName,currentUserId:t,currentUserRole:r,status:e.status,onUpdateStatus:a})}),(0,s.jsx)(c.av,{value:"documents",className:"mt-0",children:(0,s.jsx)(V,{documents:e.documents,dealRoomId:e.id,currentUserId:t,currentUserRole:r})}),(0,s.jsx)(c.av,{value:"activity",className:"mt-0",children:(0,s.jsx)(es,{activities:e.activities})})]})]})}function eo(){let e=(0,a.useParams)().id,{role:t}=(0,n.h)(),r="founder"===t?"founder-1":"investor-1",l="founder"===t?"John Founder":"Jane Investor",{data:d,isLoading:o,error:c,refetch:m}=(0,i.S)(`/api/deal-rooms/${e}`,["deal-room",e],void 0,{enabled:!!e,refetchInterval:1e4}),x=(0,i.L)("patch",`/api/deal-rooms/${e}`,{invalidateQueries:[["deal-room",e]]}),h=(0,i.L)("patch",`/api/deal-rooms/${e}?archive=${!d?.isArchived}`,{invalidateQueries:[["deal-room",e],["deal-rooms"]]});return o?(0,s.jsxs)("div",{className:"flex justify-center items-center min-h-screen",children:[(0,s.jsx)(R.A,{className:"animate-spin h-8 w-8 text-blue-500"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading deal room..."})]}):c||!d?(0,s.jsx)("div",{className:"flex justify-center items-center min-h-screen text-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(et.A,{className:"h-12 w-12 text-red-500 mx-auto mb-3"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Error loading deal room"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"There was a problem fetching the deal room details. Please try again."}),(0,s.jsx)(u.$,{onClick:()=>m(),children:"Try Again"})]})}):(0,s.jsx)(ed,{dealRoom:d,currentUserId:r,currentUserRole:t,onUpdateStatus:e=>{x.mutate({action:"updateStatus",status:e,userId:r,userName:l,userRole:t})},onArchive:()=>{h.mutate({action:"toggleArchive",userId:r})}})}},33873:e=>{"use strict";e.exports=require("path")},34466:(e,t,r)=>{"use strict";r.d(t,{z:()=>I,C:()=>P});var s=r(60687),a=r(43210),n=r(70569),i=r(98599),l=r(11273),d=r(14163),o=r(72942),c=r(65551),u=r(43),m=r(66156),x=r(46059),h="Radio",[p,f]=(0,l.A)(h),[v,y]=p(h),j=a.forwardRef((e,t)=>{let{__scopeRadio:r,name:l,checked:o=!1,required:c,disabled:u,value:m="on",onCheck:x,form:h,...p}=e,[f,y]=a.useState(null),j=(0,i.s)(t,e=>y(e)),g=a.useRef(!1),N=!f||h||!!f.closest("form");return(0,s.jsxs)(v,{scope:r,checked:o,disabled:u,children:[(0,s.jsx)(d.sG.button,{type:"button",role:"radio","aria-checked":o,"data-state":w(o),"data-disabled":u?"":void 0,disabled:u,value:m,...p,ref:j,onClick:(0,n.m)(e.onClick,e=>{o||x?.(),N&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),N&&(0,s.jsx)(b,{control:f,bubbles:!g.current,name:l,value:m,checked:o,required:c,disabled:u,form:h,style:{transform:"translateX(-100%)"}})]})});j.displayName=h;var g="RadioIndicator",N=a.forwardRef((e,t)=>{let{__scopeRadio:r,forceMount:a,...n}=e,i=y(g,r);return(0,s.jsx)(x.C,{present:a||i.checked,children:(0,s.jsx)(d.sG.span,{"data-state":w(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})})});N.displayName=g;var b=a.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...l},o)=>{let c=a.useRef(null),u=(0,i.s)(c,o),x=function(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(r),h=function(e){let[t,r]=a.useState(void 0);return(0,m.N)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(t);return a.useEffect(()=>{let e=c.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(x!==r&&t){let s=new Event("click",{bubbles:n});t.call(e,r),e.dispatchEvent(s)}},[x,r,n]),(0,s.jsx)(d.sG.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...l,tabIndex:-1,ref:u,style:{...l.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function w(e){return e?"checked":"unchecked"}b.displayName="RadioBubbleInput";var D=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],k="RadioGroup",[M,C]=(0,l.A)(k,[o.RG,f]),O=(0,o.RG)(),F=f(),[A,E]=M(k),_=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,name:a,defaultValue:n,value:i,required:l=!1,disabled:m=!1,orientation:x,dir:h,loop:p=!0,onValueChange:f,...v}=e,y=O(r),j=(0,u.jH)(h),[g,N]=(0,c.i)({prop:i,defaultProp:n??null,onChange:f,caller:k});return(0,s.jsx)(A,{scope:r,name:a,required:l,disabled:m,value:g,onValueChange:N,children:(0,s.jsx)(o.bL,{asChild:!0,...y,orientation:x,dir:j,loop:p,children:(0,s.jsx)(d.sG.div,{role:"radiogroup","aria-required":l,"aria-orientation":x,"data-disabled":m?"":void 0,dir:j,...v,ref:t})})})});_.displayName=k;var R="RadioGroupItem",U=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,disabled:l,...d}=e,c=E(R,r),u=c.disabled||l,m=O(r),x=F(r),h=a.useRef(null),p=(0,i.s)(t,h),f=c.value===d.value,v=a.useRef(!1);return a.useEffect(()=>{let e=e=>{D.includes(e.key)&&(v.current=!0)},t=()=>v.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,s.jsx)(o.q7,{asChild:!0,...m,focusable:!u,active:f,children:(0,s.jsx)(j,{disabled:u,required:c.required,checked:f,...x,...d,name:c.name,ref:p,onCheck:()=>c.onValueChange(d.value),onKeyDown:(0,n.m)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,n.m)(d.onFocus,()=>{v.current&&h.current?.click()})})})});U.displayName=R;var T=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,...a}=e,n=F(r);return(0,s.jsx)(N,{...n,...a,ref:t})});T.displayName="RadioGroupIndicator";let q=(0,r(62688).A)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var S=r(96241);let I=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(_,{className:(0,S.cn)("grid gap-2",e),...t,ref:r}));I.displayName=_.displayName;let P=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(U,{ref:r,className:(0,S.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,s.jsx)(T,{className:"flex items-center justify-center",children:(0,s.jsx)(q,{className:"h-2.5 w-2.5 fill-current text-current"})})}));P.displayName=U.displayName},34729:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var s=r(60687),a=r(43210),n=r(96241);let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));i.displayName="Textarea"},55192:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>u});var s=r(60687),a=r(43210),n=r(96241);let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66996:(e,t,r)=>{Promise.resolve().then(r.bind(r,33416))},67065:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=r(65239),a=r(48088),n=r(88170),i=r.n(n),l=r(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o={children:["",{children:["deal-rooms",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,90580)),"/Users/mac/Downloads/VentureHiveIntelligence/src/app/deal-rooms/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/mac/Downloads/VentureHiveIntelligence/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/mac/Downloads/VentureHiveIntelligence/src/app/deal-rooms/[id]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/deal-rooms/[id]/page",pathname:"/deal-rooms/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},74075:e=>{"use strict";e.exports=require("zlib")},78148:(e,t,r)=>{"use strict";r.d(t,{b:()=>l});var s=r(43210),a=r(14163),n=r(60687),i=s.forwardRef((e,t)=>(0,n.jsx)(a.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i},78272:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},79551:e=>{"use strict";e.exports=require("url")},80013:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var s=r(60687),a=r(43210),n=r(78148),i=r(24224),l=r(96241);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.b,{ref:r,className:(0,l.cn)(d(),e),...t}));o.displayName=n.b.displayName},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},85763:(e,t,r)=>{"use strict";r.d(t,{Xi:()=>o,av:()=>c,j7:()=>d,tU:()=>l});var s=r(60687),a=r(43210),n=r(55146),i=r(96241);let l=n.bL,d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.B8,{ref:r,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));d.displayName=n.B8.displayName;let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.l9,{ref:r,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));o.displayName=n.l9.displayName;let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.UC,{ref:r,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=n.UC.displayName},89667:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(60687),a=r(43210),n=r(96241);let i=a.forwardRef(({className:e,type:t,...r},a)=>(0,s.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));i.displayName="Input"},90580:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/mac/Downloads/VentureHiveIntelligence/src/app/deal-rooms/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/mac/Downloads/VentureHiveIntelligence/src/app/deal-rooms/[id]/page.tsx","default")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,6509,5560,7950,4468,6921],()=>r(67065));module.exports=s})();